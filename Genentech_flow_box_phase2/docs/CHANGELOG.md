# 版本更新紀錄 (Changelog)

## v7.1 (2025-12-22)

### Bug 修復
- **修復日期歷史 v1 被覆蓋問題**：修復當編輯任務日期時，v1 初始規劃日期被錯誤覆蓋的問題
  - 原因：後端 `GoogleAppsScripts.gs` 忽略前端傳來的 `dateHistory`，自行重新計算導致覆蓋
  - 修復：後端現在優先使用前端傳來的 `dateHistory`，避免覆蓋原始記錄

### 新增功能
- **相依性衝突警告**：當前置任務完成日 ≥ 後續任務開始日時警告
  - 甘特圖任務條顯示紅色粗框 + 發光陰影
  - 任務名稱旁顯示「⚠️ 衝突」標籤
  - 衝突任務列背景變淡紅色
  - 相依性連線變紅色粗線

### 技術變更
- 新增 `hasDependencyConflict()` 函式偵測衝突
- 新增紅色箭頭 SVG marker (`arrowhead-red`)

---

## v7.0 (2025-12-22)

### 新增功能
- **日期變更歷史追蹤**：記錄任務完成日的每次變更
  - 新增 `dateHistory` 欄位（JSON 格式）
  - 表單新增「日期變更原因」輸入欄位
  - 表單顯示完整變更歷史

- **甘特圖視覺化改進**：
  - 顯示原始規劃時程（淺灰色虛線區塊）
  - 任務名稱旁顯示「+N天」延期標籤

### 技術變更
- Google Apps Script 新增 `dateHistory` 處理邏輯
- 新增 `initializeDateHistory()` 批量初始化工具
- 前端資料載入時自動解析 `dateHistory` JSON

---

## v6.9 (2025-12-14)

### 新增功能
- 隱藏已完成任務功能
- 預設勾選「隱藏已完成」

---

## v6.8 及更早版本

（請參考 Git 歷史記錄）
